SELECT e.idestudiante, e.apellido1, e.apellido2, e.nombre1, e.nombre2, m.idaula FROM estudiante e, matricula m WHERE e.idestudiante=m.idestudiante AND e.habilitado='S' AND m.tipo_matricula='R' AND m.aniolectivo=2012 AND m.idaula IN (SELECT c.idaula FROM clase c WHERE c.iddocente=87946029 AND c.aniolectivo=2012) and m.idestudiante NOT IN (SELECT n.idestudiante FROM notas n WHERE n.aniolectivo=2012 AND n.tipo_nota='R' AND n.periodo=1 AND n.idmateria=1 );